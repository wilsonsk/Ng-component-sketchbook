<ion-header>
  <ion-navbar class="h4 pl4">
    <drively-logo></drively-logo>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-row class="pa5" style="background:linear-gradient(90deg, rgb(216, 124, 39) 0%, rgb(247, 184, 126) 100%) no-repeat;">
    <ion-col col-9>
      <span class="avenir f1 fw6 tracked white db">Routes remaining</span>
      <span class="avenir f3 fw4 tracked white db mt4">Swipe a route left to begin/end a trip</span>
      <span class="avenir f3 fw4 tracked white db mt2">Swipe a route right to access trip notes</span>
    </ion-col>
    <ion-col col-3 align-items-center>
      <span class="avenir f-headline fw6 tracked white">{{ numRoutes }}</span>
    </ion-col>
  </ion-row>

  <ion-list no-lines class="mt4" *ngIf="routes">
    <ion-item-sliding *ngFor="let route of routes;let i = index;">
      <ion-item >
        <ion-card class="br3 bl bw3 shadow-3" style="border-color:#D87C27">
          <ion-card-content no-padding>
            <ion-row class="pa4">
              <ion-col col-3 class="br b--silver">
                <ion-row>
                  <ion-col col-12>
                    <h1 class="avenir f-headline fw6 tracked" style="color:#D87C27">Route: {{ i + 1 }}</h1>
                  </ion-col>
                </ion-row>
                <ion-row class="mt5">
                  <ion-col col-12>
                    <span class="avenir f4 fw6" style="color:#D87C27">Pick Up Time:</span>
                  </ion-col>
                  <ion-col col-12>
                    <span class="avenir f2 fw7">{{ route.pickUpTime }}</span>
                  </ion-col>
                </ion-row>
              </ion-col>
              <ion-col col-9 class="pl4">
                <ion-row>
                  <ion-col col-1 dotted-border>
                  </ion-col>
                  <ion-col col-11 class="pl3">
                    <ion-row>
                      <ion-col col-12 class="bb bw6 tc">
                        <span class="avenir f3 fw3">{{ route.sourceAddr }}</span>
                      </ion-col>
                      <ion-col col-12 class="tc">
                        <span class="avenir f3 fw3">{{ route.destinationAddr }}</span>
                      </ion-col>
                    </ion-row>
                  </ion-col>
                </ion-row>
                <ion-row class="mt5">
                  <ion-col col-3>
                    <ion-row>
                      <ion-col col-12>
                        <span class="avenir f4 fw6" style="color:#D87C27">Appointment Time:</span>
                      </ion-col>
                      <ion-col col-12>
                        <span class="avenir f2 fw7">{{ route.appointmentTime }}</span>
                      </ion-col>
                    </ion-row>
                  </ion-col>
                  <ion-col col-2 push-1>
                    <ion-row>
                      <ion-col col-12>
                        <span class="avenir f4 fw6" style="color:#D87C27">Ambulatory:</span>
                      </ion-col>
                      <ion-col col-12>
                        <span class="avenir f2 fw8"*ngIf="route.ambulatory;else notAmbulatory">Y</span>
                        <ng-template #notAmbulatory><span class="avenir f2 fw8">N</span></ng-template>
                      </ion-col>
                    </ion-row>
                  </ion-col>
                  <ion-col col-2 push-1>
                    <ion-row>
                      <ion-col col-12>
                        <span class="avenir f4 fw6" style="color:#D87C27">Shared Ride:</span>
                      </ion-col>
                      <ion-col col-12>
                        <span class="avenir f2 fw8" *ngIf="route.shared;else notShared">Y</span>
                        <ng-template #notShared><span class="avenir f2 fw8">N</span></ng-template>
                      </ion-col>
                    </ion-row>
                  </ion-col>
                </ion-row>
              </ion-col>
            </ion-row>
          </ion-card-content>
        </ion-card>
      </ion-item>
      <ion-item-options side="right">
        <ion-row *ngIf="currentLocation;else spinner">
          <ion-col col-12 no-padding>
            <button ion-button class="bg-blue" (click)="openMap(route)">
              <ion-icon name="send"></ion-icon>
              Start Trip
            </button>
            <button ion-button class="bg-red" (click)="onRouteComplete(route)">
              <ion-icon name="checkmark"></ion-icon>
              Trip Complete
            </button>
          </ion-col>
        </ion-row>
        <ng-template #spinner>
          <ion-row>
            <ion-col col-8>
              <h1 class="avenir f3 fw6">Location data is loading...</h1>
            </ion-col>
            <ion-col col-4>
              <ion-spinner></ion-spinner>
            </ion-col>
          </ion-row>
        </ng-template>
      </ion-item-options>
      <ion-item-options side="left">
        <ion-row>
          <ion-col col-12 no-padding>
            <button ion-button style="background-color:#D87C27" (click)="onOpenRouteNotes(route)">
              <ion-icon name="document"></ion-icon>
              Access Trip Notes
            </button>
          </ion-col>
        </ion-row>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>


</ion-content>
